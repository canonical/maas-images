product_id: "com.ubuntu.maas.candidate:1:{os}:{firmware_platform}:{arch}"
content_id: "com.ubuntu.maas:candidate:1:bootloader-download"

bootloaders:
 - firmware-platform: pxe
   packages:
    - pxelinux
    - syslinux-common
   arch: i386
   arches: i386,amd64
   archive: http://archive.ubuntu.com/ubuntu
   release: focal
   # pxelinux and syslinux-common were accidentally removed from main. It has
   # been added back to main and is supported by foundations however because
   # there have been no updates its still in universe.
   allow_universe: True
   os: pxelinux
   files:
    - usr/lib/PXELINUX/pxelinux.0
    - usr/lib/PXELINUX/lpxelinux.0
    - usr/lib/syslinux/modules/bios/*.c32
 - firmware-platform: uefi
   packages:
    - shim-signed
    - grub-efi-amd64-signed
   arch: amd64
   arches: amd64
   archive: http://archive.ubuntu.com/ubuntu
   release: bionic
   os: grub-efi-signed
   files:
    - usr/lib/shim/shimx64.efi.signed, bootx64.efi
    - usr/lib/grub/x86_64-efi-signed/grubnetx64.efi.signed, grubx64.efi
 - firmware-platform: uefi
   packages:
    - grub-efi-arm64-bin
   arch: arm64
   arches: arm64
   archive: http://ports.ubuntu.com
   release: bionic
   os: grub-efi
   files:
    - usr/lib/grub/arm64-efi/
   grub_format: arm64-efi
   grub_output: grubaa64.efi
   grub_config: |
      # MAAS GRUB2 pre-loader configuration file
      
      # Load based on MAC address first.
      configfile (pxe)/grub/grub.cfg-${net_default_mac}

      # Failed to load based on MAC address.
      # Load arm64 by default, UEFI only supported by 64-bit
      configfile (pxe)/grub/grub.cfg-default-arm64
 - firmware-platform: open-firmware
   packages:
    - grub-ieee1275-bin
   arch: ppc64el
   arches: ppc64el,ppc64
   archive: http://ports.ubuntu.com
   release: xenial
   os: grub-ieee1275
   files:
    - usr/lib/grub/powerpc-ieee1275/
   grub_format: powerpc-ieee1275
   grub_output: bootppc64.bin
   grub_config: |
      configfile (pxe)/grub/grub.cfg-${net_default_mac}
      configfile (pxe)/grub/grub.cfg-default-ppc64el

# vi: syntax=yaml nowrap
